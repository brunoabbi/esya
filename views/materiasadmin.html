<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Módulo de Materias</title>
  <link rel="icon" type="image/png" href="/assets/logo.png">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .fade-in { animation: fadeIn 0.3s ease-out forwards; }
    .fade-out { animation: fadeOut 0.3s ease-in forwards; }
    @keyframes fadeIn {
      from { opacity: 0; transform: scale(0.95); }
      to { opacity: 1; transform: scale(1); }
    }
    @keyframes fadeOut {
      from { opacity: 1; transform: scale(1); }
      to { opacity: 0; transform: scale(0.95); }
    }
  </style>
</head>
<body class="min-h-screen flex flex-col bg-gradient-to-br from-[#0f172a] via-[#1e293b] to-[#0b0f1a] text-gray-100">
<nav class="fixed top-0 w-full z-50 bg-black/30 backdrop-blur-md border-b border-white/10 shadow-md">
  <div class="max-w-7xl mx-auto px-6 py-3 flex justify-between items-center">
    
    <!-- Logo -->
    <a href="/views/modulos.html" class="flex items-center space-x-3 text-white font-semibold tracking-wide">
      <img src="/assets/logo.png" alt="Logo" class="w-9 h-9">
    </a>

    <!-- Menú desplegable -->
    <div class="relative">
      <button onclick="toggleMenu()" 
        class="px-3 py-1 text-sm bg-white/10 hover:bg-white/20 rounded-md transition text-white">
        ☰ Menú
      </button>
      
      <!-- Dropdown -->
      <div id="dropdownMenu" 
        class="hidden absolute right-0 mt-2 w-40 bg-gray-900 border border-white/10 rounded-lg shadow-lg overflow-hidden">
        <a href="/views/modulos.html" 
           class="block px-4 py-2 text-sm text-white hover:bg-gray-700">🔙 Volver</a>
        <a href="/views/admin.html" 
           class="block px-4 py-2 text-sm text-white hover:bg-gray-700">⚙️ Panel de Admin</a>
        <a href="/logout" 
           class="block px-4 py-2 text-sm text-red-400 hover:bg-red-500 hover:text-white">🚪 Salir</a>
      </div>
    </div>
  </div>
</nav>

  <main class="flex-1 pt-12 px-4">


      <div class="flex justify-center min-h-screen pt-12 px-4">
    
    <!-- Card responsive -->
<div class="w-full max-w-md sm:max-w-lg mx-auto 
            bg-white/10 backdrop-blur-xl border border-white/20 
            rounded-2xl shadow-lg p-6 md:p-8 space-y-6">
  
  <h2 class="text-2xl md:text-3xl font-semibold text-white text-center">
    📤 Administrar Materiales
  </h2>

  <!-- Selección de materia -->
  <div>
    <label for="materia" class="block text-gray-300 text-sm">Seleccionar materia</label>
    <select id="materia"
      class="w-full mt-1 rounded-lg border border-gray-600 bg-gray-800 text-white p-2 text-sm focus:ring-2 focus:ring-cyan-500">
      <option value="">-- Elige una materia --</option>
      <option value="primeros-auxilios">⛑️ Primeros Auxilios</option>
      <option value="derecho">⚖️ Derecho</option>
      <option value="informatica">💻 Informática</option>
      <option value="educacion-fisica">🏃 Educación Física</option>
      <option value="psicologia">🧠 Psicología</option>
      <option value="criminologia">🔍 Criminología</option>
      <option value="investigacion">📊 Metodología de Investigación</option>
      <option value="comunicacion">🗣️ Comunicación</option>
      <option value="historia">📜 Historia</option>
      <option value="seguridad">👮 Seguridad Ciudadana</option>
    </select>
  </div>
  
  <!-- Formulario carga -->
  <div class="space-y-3">
    <label class="block text-gray-300 text-sm">Descripción del material</label>
    <textarea id="inputDescripcion" rows="2" 
      class="w-full rounded-lg border border-gray-600 bg-gray-800 text-white p-2 text-sm focus:ring-2 focus:ring-cyan-500"></textarea>
    
    <label class="block text-gray-300 text-sm mt-2">Seleccionar archivo</label>
    <input id="inputArchivo" type="file" 
      class="block w-full text-sm text-gray-300 
             file:mr-4 file:py-2 file:px-4 
             file:rounded-lg file:border-0 
             file:text-sm file:font-semibold 
             file:bg-cyan-500 file:text-white 
             hover:file:bg-cyan-600" />
    
    <button onclick="agregarMaterial()" 
      class="w-full mt-4 px-4 py-2 bg-green-600 hover:bg-green-700 rounded-lg text-white shadow transition">
      ➕ Agregar Material
    </button>
  </div>
  
  <!-- Lista de materiales -->
  <div>
    <h3 class="text-lg font-semibold text-white mb-3">📚 Materiales cargados</h3>
    <div id="listaMateriales" class="space-y-3"></div>
  </div>
</div>

    
  </div>
</div>
<br>




</div>
      <!-- Buscador -->
      <div class="mb-8 max-w-md">
        <label for="buscar" class="sr-only">Buscar materia</label>
        <input id="buscar" type="text" placeholder="Buscar materia…" class="w-full rounded-xl bg-white/10 border border-white/20 px-4 py-2 outline-none focus:ring-2 focus:ring-cyan-400 placeholder-gray-400" oninput="filtrarMaterias(this.value)">
      </div>

      <!-- GRID -->
      <div id="gridMaterias" class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5">

        <!-- Materia 1 -->
        <div 
          data-nombre="derecho penal" 
          data-titulo="Módulo Inicial Básico. Normativas Nacionales y Provinciales"
          data-tipo="Teórico" 
          data-icono="⚖️"
          data-descripcion="Estudio de las normativas nacionales y provinciales con enfoque en derecho penal aplicado a la función policial."
          data-materiales='[
            {"nombre": "Apuntes en PDF", "url": "/materiales/derecho-penal.pdf", "icono": "📄"},
            {"nombre": "Presentación PPT", "url": "/materiales/derecho-penal.pptx", "icono": "📊"},
            {"nombre": "Guía en Word", "url": "/materiales/derecho-penal.docx", "icono": "📝"}
          ]'
          class="group cursor-pointer block rounded-2xl bg-white/10 border border-white/20 backdrop-blur-xl p-5 shadow-lg hover:shadow-2xl hover:-translate-y-1.5 hover:border-cyan-400/40 transition transform">
          <div class="flex items-center justify-between">
            <span class="text-2xl">⚖️</span>
            <span class="text-xs px-2 py-0.5 rounded-full bg-cyan-500/20 border border-cyan-400/30">Teórico</span>
          </div>
          <h2 class="mt-4 text-lg font-semibold text-white">Normativas Nacionales y Provinciales</h2>
          <span class="mt-4 inline-flex items-center text-sm text-cyan-300">Ver detalles →</span>
        </div>

        <!-- Materia 2 -->
        <div 
          data-nombre="primeros auxilios" 
          data-titulo="Primeros Auxilios"
          data-tipo="Teórico" 
          data-icono="⛑️"
          data-descripcion="Brinda herramientas para la asistencia inicial ante emergencias hasta la llegada de profesionales médicos."
          data-materiales='[
            {"nombre": "Manual PDF", "url": "/materiales/primeros-auxilios.pdf", "icono": "📄"},
            {"nombre": "Guía rápida", "url": "/materiales/primeros-auxilios.docx", "icono": "📝"}
          ]'
          class="group cursor-pointer block rounded-2xl bg-white/10 border border-white/20 backdrop-blur-xl p-5 shadow-lg hover:shadow-2xl hover:-translate-y-1.5 hover:border-rose-400/40 transition transform">
          <div class="flex items-center justify-between">
            <span class="text-2xl">⛑️</span>
            <span class="text-xs px-2 py-0.5 rounded-full bg-rose-500/20 border border-rose-400/30">Teórico</span>
          </div>
          <h2 class="mt-4 text-lg font-semibold text-white">Primeros Auxilios</h2>
          <span class="mt-4 inline-flex items-center text-sm text-rose-300">Ver detalles →</span>
        </div>

        <!-- Materia 3 -->
        <div 
          data-nombre="educacion fisica" 
          data-titulo="Educación Física"
          data-tipo="Práctico" 
          data-icono="🏋️"
          data-descripcion="Desarrollo de la condición física necesaria para el desempeño de la función policial."
          data-materiales='[
            {"nombre": "Rutinas en PDF", "url": "/materiales/educacion-fisica.pdf", "icono": "📄"},
            {"nombre": "Video clases", "url": "/materiales/educacion-fisica.mp4", "icono": "🎥"}
          ]'
          class="group cursor-pointer block rounded-2xl bg-white/10 border border-white/20 backdrop-blur-xl p-5 shadow-lg hover:shadow-2xl hover:-translate-y-1.5 hover:border-green-400/40 transition transform">
          <div class="flex items-center justify-between">
            <span class="text-2xl">🏋️</span>
            <span class="text-xs px-2 py-0.5 rounded-full bg-green-500/20 border border-green-400/30">Práctico</span>
          </div>
          <h2 class="mt-4 text-lg font-semibold text-white">Educación Física</h2>
          <span class="mt-4 inline-flex items-center text-sm text-green-300">Ver detalles →</span>
        </div>

        <!-- Materia 4 -->
        <div 
          data-nombre="criminologia" 
          data-titulo="Criminología"
          data-tipo="Teórico" 
          data-icono="🕵️"
          data-descripcion="Estudio de la criminología, teorías del delito y su aplicación práctica en la labor policial."
          data-materiales='[
            {"nombre": "Apuntes PDF", "url": "/materiales/criminologia.pdf", "icono": "📄"}
          ]'
          class="group cursor-pointer block rounded-2xl bg-white/10 border border-white/20 backdrop-blur-xl p-5 shadow-lg hover:shadow-2xl hover:-translate-y-1.5 hover:border-yellow-400/40 transition transform">
          <div class="flex items-center justify-between">
            <span class="text-2xl">🕵️</span>
            <span class="text-xs px-2 py-0.5 rounded-full bg-yellow-500/20 border border-yellow-400/30">Teórico</span>
          </div>
          <h2 class="mt-4 text-lg font-semibold text-white">Criminología</h2>
          <span class="mt-4 inline-flex items-center text-sm text-yellow-300">Ver detalles →</span>
        </div>

        <!-- Materia 5 -->
        <div 
          data-nombre="informatica aplicada" 
          data-titulo="Informática Aplicada"
          data-tipo="Mixto" 
          data-icono="💻"
          data-descripcion="Uso de herramientas informáticas para la gestión de la seguridad y el análisis de datos."
          data-materiales='[
            {"nombre": "Manual PDF", "url": "/materiales/informatica.pdf", "icono": "📄"},
            {"nombre": "Ejercicios", "url": "/materiales/informatica.xlsx", "icono": "📊"}
          ]'
          class="group cursor-pointer block rounded-2xl bg-white/10 border border-white/20 backdrop-blur-xl p-5 shadow-lg hover:shadow-2xl hover:-translate-y-1.5 hover:border-blue-400/40 transition transform">
          <div class="flex items-center justify-between">
            <span class="text-2xl">💻</span>
            <span class="text-xs px-2 py-0.5 rounded-full bg-blue-500/20 border border-blue-400/30">Mixto</span>
          </div>
          <h2 class="mt-4 text-lg font-semibold text-white">Informática Aplicada</h2>
          <span class="mt-4 inline-flex items-center text-sm text-blue-300">Ver detalles →</span>
        </div>

        <div 
          data-nombre="primeros auxilios" 
          data-titulo="Primeros Auxilios"
          data-tipo="Teórico" 
          data-icono="⛑️"
          data-descripcion="Brinda herramientas para la asistencia inicial ante emergencias hasta la llegada de profesionales médicos."
          data-materiales='[
            {"nombre": "Manual PDF", "url": "/materiales/primeros-auxilios.pdf", "icono": "📄"},
            {"nombre": "Guía rápida", "url": "/materiales/primeros-auxilios.docx", "icono": "📝"}
          ]'
          class="group cursor-pointer block rounded-2xl bg-white/10 border border-white/20 backdrop-blur-xl p-5 shadow-lg hover:shadow-2xl hover:-translate-y-1.5 hover:border-rose-400/40 transition transform">
          <div class="flex items-center justify-between">
            <span class="text-2xl">⛑️</span>
            <span class="text-xs px-2 py-0.5 rounded-full bg-rose-500/20 border border-rose-400/30">Teórico</span>
          </div>
          <h2 class="mt-4 text-lg font-semibold text-white">Primeros Auxilios</h2>
          <span class="mt-4 inline-flex items-center text-sm text-rose-300">Ver detalles →</span>
        </div>

        <div 
          data-nombre="primeros auxilios" 
          data-titulo="Primeros Auxilios"
          data-tipo="Teórico" 
          data-icono="⛑️"
          data-descripcion="Brinda herramientas para la asistencia inicial ante emergencias hasta la llegada de profesionales médicos."
          data-materiales='[
            {"nombre": "Manual PDF", "url": "/materiales/primeros-auxilios.pdf", "icono": "📄"},
            {"nombre": "Guía rápida", "url": "/materiales/primeros-auxilios.docx", "icono": "📝"}
          ]'
          class="group cursor-pointer block rounded-2xl bg-white/10 border border-white/20 backdrop-blur-xl p-5 shadow-lg hover:shadow-2xl hover:-translate-y-1.5 hover:border-rose-400/40 transition transform">
          <div class="flex items-center justify-between">
            <span class="text-2xl">⛑️</span>
            <span class="text-xs px-2 py-0.5 rounded-full bg-rose-500/20 border border-rose-400/30">Teórico</span>
          </div>
          <h2 class="mt-4 text-lg font-semibold text-white">Primeros Auxilios</h2>
          <span class="mt-4 inline-flex items-center text-sm text-rose-300">Ver detalles →</span>
        </div>

        <div 
          data-nombre="primeros auxilios" 
          data-titulo="Primeros Auxilios"
          data-tipo="Teórico" 
          data-icono="⛑️"
          data-descripcion="Brinda herramientas para la asistencia inicial ante emergencias hasta la llegada de profesionales médicos."
          data-materiales='[
            {"nombre": "Manual PDF", "url": "/materiales/primeros-auxilios.pdf", "icono": "📄"},
            {"nombre": "Guía rápida", "url": "/materiales/primeros-auxilios.docx", "icono": "📝"}
          ]'
          class="group cursor-pointer block rounded-2xl bg-white/10 border border-white/20 backdrop-blur-xl p-5 shadow-lg hover:shadow-2xl hover:-translate-y-1.5 hover:border-rose-400/40 transition transform">
          <div class="flex items-center justify-between">
            <span class="text-2xl">⛑️</span>
            <span class="text-xs px-2 py-0.5 rounded-full bg-rose-500/20 border border-rose-400/30">Teórico</span>
          </div>
          <h2 class="mt-4 text-lg font-semibold text-white">Primeros Auxilios</h2>
          <span class="mt-4 inline-flex items-center text-sm text-rose-300">Ver detalles →</span>
        </div>

        <div 
          data-nombre="primeros auxilios" 
          data-titulo="Primeros Auxilios"
          data-tipo="Teórico" 
          data-icono="⛑️"
          data-descripcion="Brinda herramientas para la asistencia inicial ante emergencias hasta la llegada de profesionales médicos."
          data-materiales='[
            {"nombre": "Manual PDF", "url": "/materiales/primeros-auxilios.pdf", "icono": "📄"},
            {"nombre": "Guía rápida", "url": "/materiales/primeros-auxilios.docx", "icono": "📝"}
          ]'
          class="group cursor-pointer block rounded-2xl bg-white/10 border border-white/20 backdrop-blur-xl p-5 shadow-lg hover:shadow-2xl hover:-translate-y-1.5 hover:border-rose-400/40 transition transform">
          <div class="flex items-center justify-between">
            <span class="text-2xl">⛑️</span>
            <span class="text-xs px-2 py-0.5 rounded-full bg-rose-500/20 border border-rose-400/30">Teórico</span>
          </div>
          <h2 class="mt-4 text-lg font-semibold text-white">Primeros Auxilios</h2>
          <span class="mt-4 inline-flex items-center text-sm text-rose-300">Ver detalles →</span>
        </div>

        <div 
          data-nombre="primeros auxilios" 
          data-titulo="Primeros Auxilios"
          data-tipo="Teórico" 
          data-icono="⛑️"
          data-descripcion="Brinda herramientas para la asistencia inicial ante emergencias hasta la llegada de profesionales médicos."
          data-materiales='[
            {"nombre": "Manual PDF", "url": "/materiales/primeros-auxilios.pdf", "icono": "📄"},
            {"nombre": "Guía rápida", "url": "/materiales/primeros-auxilios.docx", "icono": "📝"}
          ]'
          class="group cursor-pointer block rounded-2xl bg-white/10 border border-white/20 backdrop-blur-xl p-5 shadow-lg hover:shadow-2xl hover:-translate-y-1.5 hover:border-rose-400/40 transition transform">
          <div class="flex items-center justify-between">
            <span class="text-2xl">⛑️</span>
            <span class="text-xs px-2 py-0.5 rounded-full bg-rose-500/20 border border-rose-400/30">Teórico</span>
          </div>
          <h2 class="mt-4 text-lg font-semibold text-white">Primeros Auxilios</h2>
          <span class="mt-4 inline-flex items-center text-sm text-rose-300">Ver detalles →</span>
        </div>

      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer class="bg-black/30 border-t border-white/10 py-6 backdrop-blur-sm mt-auto">
    <div class="max-w-7xl mx-auto text-center">
      <p class="text-sm text-gray-400">© 2025 Sistema Web de Gestión — Módulo de Materias</p>
    </div>
  </footer>

  <!-- MODAL FULLSCREEN -->
  <div id="modal" class="fixed inset-0 hidden bg-black/95 z-50 flex flex-col">
    <!-- Header Modal -->
    <div class="flex justify-between items-center p-6 border-b border-white/10">
      <div class="flex items-center gap-3">
        <span id="modalIcono" class="text-4xl"></span>
        <h2 id="modalTitulo" class="text-2xl font-bold text-white"></h2>
      </div>
      <button onclick="cerrarModal()" class="text-gray-400 hover:text-white text-3xl">&times;</button>
    </div>

    <!-- Contenido -->
    <div class="flex-1 overflow-y-auto p-6 space-y-6">
      <p id="modalDescripcion" class="text-gray-300 text-lg"></p>
      <div>
        <h3 class="text-lg font-semibold mb-3">Material de estudio:</h3>
        <div id="modalMateriales" class="space-y-3"></div>
      </div>
    </div>

    <!-- Footer Modal -->
    <div class="p-6 border-t border-white/10 text-right">
      <button onclick="cerrarModal()" class="px-5 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg text-white transition">Cerrar</button>
    </div>
  </div>

  <script>
    // Filtro de búsqueda
    function filtrarMaterias(texto) {
      const term = (texto || '').toLowerCase().trim();
      const cards = document.querySelectorAll('#gridMaterias > div');
      cards.forEach(card => {
        const nombre = (card.getAttribute('data-nombre') || '').toLowerCase();
        card.style.display = nombre.includes(term) ? '' : 'none';
      });
    }

    // Modal
    const modal = document.getElementById("modal");
    const modalTitulo = document.getElementById("modalTitulo");
    const modalIcono = document.getElementById("modalIcono");
    const modalDescripcion = document.getElementById("modalDescripcion");
    const modalMateriales = document.getElementById("modalMateriales");

    document.querySelectorAll("#gridMaterias > div").forEach(card => {
      card.addEventListener("click", () => {
        modalTitulo.textContent = card.dataset.titulo;
        modalIcono.textContent = card.dataset.icono;
        modalDescripcion.textContent = card.dataset.descripcion;

        // Renderizar materiales
        modalMateriales.innerHTML = "";
        const materiales = JSON.parse(card.dataset.materiales || "[]");
        materiales.forEach(mat => {
          const link = document.createElement("a");
          link.href = mat.url;
          link.download = "";
          link.className = "block px-5 py-3 bg-cyan-500 hover:bg-cyan-600 rounded-lg text-white shadow transition text-left";
          link.textContent = `${mat.icono} ${mat.nombre}`;
          modalMateriales.appendChild(link);
        });

        modal.classList.remove("hidden");
        modal.classList.remove("fade-out");
        modal.classList.add("fade-in");
      });
    });

    function cerrarModal() {
      modal.classList.remove("fade-in");
      modal.classList.add("fade-out");
      setTimeout(() => { modal.classList.add("hidden"); }, 300);
    }

  let materiaActiva = null; // guardamos la card seleccionada

  document.querySelectorAll("#gridMaterias > div").forEach(card => {
    card.addEventListener("click", () => {
      materiaActiva = card;

      modalTitulo.textContent = card.dataset.titulo;
      modalIcono.textContent = card.dataset.icono;
      modalDescripcion.textContent = card.dataset.descripcion;

      // Renderizar materiales existentes
      renderizarMateriales();
      
      modal.classList.remove("hidden");
      modal.classList.remove("fade-out");
      modal.classList.add("fade-in");
    });
  });

  function renderizarMateriales() {
    modalMateriales.innerHTML = "";
    const materiales = JSON.parse(materiaActiva.dataset.materiales || "[]");
    materiales.forEach(mat => {
      const link = document.createElement("a");
      link.href = mat.url;
      link.download = "";
      link.className = "block px-5 py-3 bg-cyan-500 hover:bg-cyan-600 rounded-lg text-white shadow transition text-left";
      link.textContent = `${mat.icono} ${mat.nombre}`;
      modalMateriales.appendChild(link);
    });
  }

  // AGREGAR MATERIAL NUEVO
  function agregarMaterial() {
    const archivo = document.getElementById("inputArchivo").files[0];
    if (!archivo) {
      alert("Selecciona un archivo primero");
      return;
    }

    // Creamos un objeto temporal con URL local
    const nuevoMaterial = {
      nombre: archivo.name,
      url: URL.createObjectURL(archivo), // genera link temporal
      icono: "📄"
    };

    // Guardamos en dataset de la materia
    const materiales = JSON.parse(materiaActiva.dataset.materiales || "[]");
    materiales.push(nuevoMaterial);
    materiaActiva.dataset.materiales = JSON.stringify(materiales);

    // Renderizamos de nuevo
    renderizarMateriales();

    // Limpiar input
    document.getElementById("inputArchivo").value = "";
  }

  let materiales = [];

  function renderizarMateriales() {
    const lista = document.getElementById("listaMateriales");
    lista.innerHTML = "";

    materiales.forEach((mat, index) => {
      const card = document.createElement("div");
      card.className = "p-4 bg-gray-800 rounded-xl border border-gray-600 flex justify-between items-center";
      
      const info = document.createElement("div");
      info.className = "text-sm text-white";
      info.innerHTML = `<p><strong>${mat.nombre}</strong></p><p class="text-gray-400">${mat.descripcion}</p>`;

      const acciones = document.createElement("div");
      acciones.className = "flex gap-2";

      // botón modificar
      const btnEditar = document.createElement("button");
      btnEditar.textContent = "✏️";
      btnEditar.className = "px-2 py-1 bg-blue-600 hover:bg-blue-700 rounded text-white text-xs";
      btnEditar.onclick = () => modificarMaterial(index);

      // botón eliminar
      const btnEliminar = document.createElement("button");
      btnEliminar.textContent = "❌";
      btnEliminar.className = "px-2 py-1 bg-red-600 hover:bg-red-700 rounded text-white text-xs";
      btnEliminar.onclick = () => eliminarMaterial(index);

      acciones.appendChild(btnEditar);
      acciones.appendChild(btnEliminar);

      card.appendChild(info);
      card.appendChild(acciones);

      lista.appendChild(card);
    });
  }

  function agregarMaterial() {
    const archivo = document.getElementById("inputArchivo").files[0];
    const descripcion = document.getElementById("inputDescripcion").value.trim();

    if (!archivo) {
      alert("Selecciona un archivo primero");
      return;
    }

    const nuevoMaterial = {
      nombre: archivo.name,
      url: URL.createObjectURL(archivo),
      descripcion: descripcion || "Sin descripción"
    };

    materiales.push(nuevoMaterial);
    renderizarMateriales();

    // limpiar
    document.getElementById("inputArchivo").value = "";
    document.getElementById("inputDescripcion").value = "";
  }

  function eliminarMaterial(index) {
    materiales.splice(index, 1);
    renderizarMateriales();
  }

  function modificarMaterial(index) {
    const nuevoComentario = prompt("Editar descripción:", materiales[index].descripcion);
    if (nuevoComentario !== null) {
      materiales[index].descripcion = nuevoComentario;
      renderizarMateriales();
    }
  }

  function toggleMenu() {
    document.getElementById("dropdownMenu").classList.toggle("hidden");
  }

  // Cerrar el menú si se hace click afuera
  document.addEventListener("click", function(e) {
    const menu = document.getElementById("dropdownMenu");
    const button = e.target.closest("button");
    if (!e.target.closest("#dropdownMenu") && !button) {
      menu.classList.add("hidden");
    }
  });

  </script>
</body>
</html>
